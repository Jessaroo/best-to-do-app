{% extends 'base.html' %}

{% block content %}

<h1>To Do List</h1>

{% for task in tasks %}
  <div class="card">
    <div class="card-content">
      <a href="{% url 'detail' task.id %}"><span class="card-title">{{ task.name }}</span></a>
      <p>To-Do: {{ task.todo }}</p>
      <p>When: {{ task.when }}</p>
      {% if task.completed > 0 %}
        <p>Status: Completed</p>
      {% else %}
        <p>Status: Incomplete</p>
      {% endif %}
      <div>
        <a href="{% url 'tasks_update' task.id %}">Edit</a>
        <form action="{% url 'tasks_delete' task.id %}" method="POST" style="display: inline;">
          {% csrf_token %}
          <button type="submit" class="btn btn-danger">Delete</button>
        </form>
        {% if quotes %}
        {% for quote in quotes %}
        <form action="{% url 'save_quote' %}" method="POST" style="display: inline;">
          {% csrf_token %}
          <input type="hidden" name="quote" value="{{ quote.q }}">
          <input type="hidden" name="author" value="{{ quote.a }}">
          <button type="submit" class="btn btn-primary">Save</button>
        </form>
        {% endfor %}
      {% else %}
        <p>No wuotes available</p>
      {% endif %}
      </div>
    </div>
  </div>
{% endfor %}

{% for quote in quotes %}
  <blockquote>
    "{{ quote.q }}"
    <footer>{{ quote.a }}</footer>
  </blockquote>
  {% empty %}
    <p>No quotes available</p>
  {% endfor %}

{% endblock %}